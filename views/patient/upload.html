<!-- Formulario para Subir Fotos de Comida -->
<div class="container mb-5">
<div class="card border-0 shadow">
<div class="row mb-4">
  <div class="col-md-12 animate-on-scroll">
    <h1 class="mb-4 border-bottom pb-2">
      <i class="fas fa-camera me-2"></i>Subir Foto de Comida
    </h1>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/patient/dashboard">Dashboard</a></li>
        <li class="breadcrumb-item active">Subir Foto</li>
      </ol>
    </nav>
  </div>
</div>

<div class="row">
  <div class="col-md-8 mx-auto animate-on-scroll delay-1">
    <div class="card shadow-lg">
      <div class="card-header bg-primary text-white">
        <h4 class="mb-0"><i class="fas fa-utensils me-2"></i>Registrar Comida</h4>
      </div>
      <div class="card-body">
        <form action="/patient/upload" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
          <!-- Foto -->
          <div class="mb-4">
            <label for="photo" class="form-label">Foto de la Comida <span class="text-danger">*</span></label>
            <div class="input-group mb-3">
              <input type="file" class="form-control" id="photo" name="photo" accept="image/*" required>
              <label class="input-group-text" for="photo"><i class="fas fa-camera"></i></label>
              <div class="invalid-feedback">Por favor selecciona una imagen.</div>
            </div>
            <div class="form-text">Selecciona una foto clara de tu comida. Formatos permitidos: JPG, PNG, GIF (máx. 10MB)</div>
            
            <!-- Vista previa de la imagen -->
            <div class="mt-3 text-center d-none" id="imagePreviewContainer">
              <img id="imagePreview" class="img-fluid img-thumbnail" style="max-height: 300px;" alt="Vista previa">
            </div>
          </div>
          
          <!-- Comentarios -->
          <div class="mb-4">
            <label for="comments" class="form-label">Comentarios <span class="text-danger">*</span></label>
            <textarea class="form-control" id="comments" name="comments" rows="3" placeholder="Describe la comida, cómo te sentiste después de comerla, etc." required></textarea>
            <div class="invalid-feedback">Por favor añade un comentario sobre esta comida.</div>
          </div>
          
          <!-- Ingredientes -->
          <div class="mb-4">
            <label for="ingredients" class="form-label">Ingredientes y Cantidades <span class="text-danger">*</span></label>
            <div class="ingredients-container">
              <div class="input-group mb-2">
                <input type="text" class="form-control" id="ingredients" name="ingredients" placeholder="Ej: 100g arroz, 150g pollo, 1 cucharada aceite de oliva..." required>
                <span class="input-group-text"><i class="fas fa-list"></i></span>
                <div class="invalid-feedback">Por favor lista los ingredientes principales.</div>
              </div>
            </div>
            <div class="form-text">Intenta ser lo más preciso posible con las cantidades aproximadas.</div>
          </div>
          
          <!-- Botones -->
          <div class="d-flex justify-content-between mt-4">
            <a href="/patient/dashboard" class="btn btn-secondary">
              <i class="fas fa-arrow-left me-1"></i>Cancelar
            </a>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save me-1"></i>Guardar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>
</div>

<!-- JavaScript para previsualizar la imagen -->
<script>
  document.getElementById('photo').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const preview = document.getElementById('imagePreview');
        preview.src = e.target.result;
        document.getElementById('imagePreviewContainer').classList.remove('d-none');
      }
      reader.readAsDataURL(file);
    }
  });
</script> 